{"ast":null,"code":"import _toConsumableArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createRef,useEffect,useState,useRef}from\"react\";import{v4 as uuidv4}from\"uuid\";import{jsx as _jsx}from\"react/jsx-runtime\";var GlobalStateContext=/*#__PURE__*/React.createContext(undefined);var GlobalActionsContext=/*#__PURE__*/React.createContext(undefined);var GlobalContextProvider=function GlobalContextProvider(_ref){var children=_ref.children;var chartDataOrg=useRef([]);var _useState=useState(50),_useState2=_slicedToArray(_useState,2),initialPopulation=_useState2[0],setInitialPopulation=_useState2[1];var _useState3=useState([initialPopulation]),_useState4=_slicedToArray(_useState3,2),chartData=_useState4[0],setChartData=_useState4[1];var _useState5=useState(\"Paused\"),_useState6=_slicedToArray(_useState5,2),status=_useState6[0],setStatus=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),restarted=_useState8[0],setRestart=_useState8[1];var _useState9=useState(0.5),_useState10=_slicedToArray(_useState9,2),speed=_useState10[0],setSpeed=_useState10[1];var _useState11=useState(0.1),_useState12=_slicedToArray(_useState11,2),foodSpawnRate=_useState12[0],setFoodSpawnRate=_useState12[1];var _useState13=useState(50),_useState14=_slicedToArray(_useState13,2),totalPopulation=_useState14[0],setTotalPopulation=_useState14[1];// const [calamity, setCalamity] = useState(\"radiation\");\nvar _useState15=useState(\"none\"),_useState16=_slicedToArray(_useState15,2),calamityType=_useState16[0],setCalamityType=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),calamityPosition=_useState18[0],setCalamityPosition=_useState18[1];var _useState19=useState(10000),_useState20=_slicedToArray(_useState19,2),calamityDuration=_useState20[0],setCalamityDuration=_useState20[1];var _useState21=useState(100),_useState22=_slicedToArray(_useState21,2),calamitySize=_useState22[0],setCalamitySize=_useState22[1];var _useState23=useState(6),_useState24=_slicedToArray(_useState23,2),calamityAmplitude=_useState24[0],setCalamityAmplitude=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),calamities=_useState26[0],setCalamities=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),isChartModalVisible=_useState28[0],setIsChartModalVisible=_useState28[1];var calamitiesOrg=useRef([]);var timerRef=useRef(0);var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),resourcePosition=_useState30[0],setResourcePosition=_useState30[1];var _useState31=useState(\"none\"),_useState32=_slicedToArray(_useState31,2),resourceType=_useState32[0],setResourceType=_useState32[1];var _useState33=useState(70),_useState34=_slicedToArray(_useState33,2),resourceSize=_useState34[0],setResourceSize=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),resources=_useState36[0],setResources=_useState36[1];var resourcesOrg=useRef([]);function addResource(){var uid=uuidv4();var resource={id:uid,type:resourceType,position:resourcePosition,size:resourceSize};var resourcesTemp=resourcesOrg.current;resourcesTemp.push(resource);resourcesOrg.current=resourcesTemp;setResources(_toConsumableArray(resourcesTemp));}function addCalamity(){var uid=uuidv4();var calamity={id:uid,type:calamityType,position:calamityPosition,duration:calamityDuration,amplitude:calamityAmplitude,size:calamitySize,start:Date.now()};var calamitiesTemp=calamitiesOrg.current;calamitiesTemp.push(calamity);calamitiesOrg.current=calamitiesTemp;setCalamities(_toConsumableArray(calamitiesTemp));return uid;}function removeResourceById(id){var resourcesTemp=resourcesOrg.current;var l=resourcesTemp.length;for(var i=0;i<l;i++){if(resourcesTemp[i].id.localeCompare(id)===0){resourcesTemp.splice(i,1);break;}}resourcesOrg.current=resourcesTemp;if(resourcesTemp.length===0){setResourcePosition(null);}setResources(_toConsumableArray(resourcesTemp));}function removeCalamityById(id){var calamitiesTemp=calamitiesOrg.current;var l=calamitiesTemp.length;for(var i=0;i<l;i++){if(calamitiesTemp[i].id.localeCompare(id)===0){calamitiesTemp.splice(i,1);break;}}calamitiesOrg.current=calamitiesTemp;if(calamitiesTemp.length===0){setCalamityPosition(null);}setCalamities(_toConsumableArray(calamitiesTemp));}useEffect(function(){if(resourcesOrg.current.length<5&&resourcePosition){addResource();}},[resourcePosition]);useEffect(function(){if(calamitiesOrg.current.length<5&&calamityPosition){var newUid=addCalamity();var interval=setInterval(function(){removeCalamityById(newUid);},[calamityDuration]);if(calamitiesOrg.current.length===0){return function(){clearInterval(interval);};}}},[calamityPosition]);useEffect(function(){chartDataOrg.current.push(totalPopulation);// timerRef.current  +=  1;\n// setChartData(chartDataOrg.current);\n},[totalPopulation]);return/*#__PURE__*/_jsx(GlobalStateContext.Provider,{value:{initialPopulation:initialPopulation,status:status,speed:speed,restarted:restarted,totalPopulation:totalPopulation,calamityType:calamityType,calamityAmplitude:calamityAmplitude,calamityDuration:calamityDuration,calamityPosition:calamityPosition,calamitySize:calamitySize,calamities:calamities,resourcePosition:resourcePosition,resources:resources,resourceType:resourceType,resourceSize:resourceSize,chartData:chartData,foodSpawnRate:foodSpawnRate,isChartModalVisible:isChartModalVisible},children:/*#__PURE__*/_jsx(GlobalActionsContext.Provider,{value:{setInitialPopulation:setInitialPopulation,setStatus:setStatus,setSpeed:setSpeed,setRestart:setRestart,setTotalPopulation:setTotalPopulation,setCalamityType:setCalamityType,setCalamityAmplitude:setCalamityAmplitude,setCalamityDuration:setCalamityDuration,setCalamityPosition:setCalamityPosition,setCalamitySize:setCalamitySize,removeResourceById:removeResourceById,setResourcePosition:setResourcePosition,setResourceType:setResourceType,setResourceSize:setResourceSize,setFoodSpawnRate:setFoodSpawnRate,setIsChartModalVisible:setIsChartModalVisible},children:children})});};var useGlobalState=function useGlobalState(){var context=React.useContext(GlobalStateContext);if(context===undefined){throw new Error(\"useGlobalState error\");}return context;};var useGlobalActions=function useGlobalActions(){var context=React.useContext(GlobalActionsContext);if(context===undefined){throw new Error(\"useGlobalActions error\");}return context;};export{useGlobalState,useGlobalActions,GlobalContextProvider};","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/context/globalContext.js"],"names":["React","createRef","useEffect","useState","useRef","v4","uuidv4","GlobalStateContext","createContext","undefined","GlobalActionsContext","GlobalContextProvider","children","chartDataOrg","initialPopulation","setInitialPopulation","chartData","setChartData","status","setStatus","restarted","setRestart","speed","setSpeed","foodSpawnRate","setFoodSpawnRate","totalPopulation","setTotalPopulation","calamityType","setCalamityType","calamityPosition","setCalamityPosition","calamityDuration","setCalamityDuration","calamitySize","setCalamitySize","calamityAmplitude","setCalamityAmplitude","calamities","setCalamities","isChartModalVisible","setIsChartModalVisible","calamitiesOrg","timerRef","resourcePosition","setResourcePosition","resourceType","setResourceType","resourceSize","setResourceSize","resources","setResources","resourcesOrg","addResource","uid","resource","id","type","position","size","resourcesTemp","current","push","addCalamity","calamity","duration","amplitude","start","Date","now","calamitiesTemp","removeResourceById","l","length","i","localeCompare","splice","removeCalamityById","newUid","interval","setInterval","clearInterval","useGlobalState","context","useContext","Error","useGlobalActions"],"mappings":"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","sourcesContent":["import React, { createRef, useEffect, useState, useRef } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst GlobalStateContext = React.createContext(undefined);\r\nconst GlobalActionsContext = React.createContext(undefined);\r\n\r\nconst GlobalContextProvider = ({ children }) => {\r\n  const chartDataOrg = useRef([]);\r\n  const [initialPopulation, setInitialPopulation] = useState(50);\r\n  const [chartData, setChartData] = useState([initialPopulation]);\r\n  \r\n  const [status, setStatus] = useState(\"Paused\");\r\n  const [restarted, setRestart] = useState(true);\r\n  const [speed, setSpeed] = useState(0.5);\r\n  const [foodSpawnRate, setFoodSpawnRate] = useState(0.1);\r\n  const [totalPopulation, setTotalPopulation] = useState(50);\r\n  // const [calamity, setCalamity] = useState(\"radiation\");\r\n\r\n  const [calamityType, setCalamityType] = useState(\"none\");\r\n  const [calamityPosition, setCalamityPosition] = useState(null);\r\n  const [calamityDuration, setCalamityDuration] = useState(10000);\r\n  const [calamitySize, setCalamitySize] = useState(100);\r\n  const [calamityAmplitude, setCalamityAmplitude] = useState(6);\r\n  const [calamities, setCalamities] = useState([]);\r\n  const [isChartModalVisible, setIsChartModalVisible] = useState(false);\r\n\r\n  const calamitiesOrg = useRef([]);\r\n  const timerRef = useRef(0);\r\n\r\n\r\n\r\n\r\n  \r\n  const [resourcePosition, setResourcePosition] = useState(null);\r\n  const [resourceType,setResourceType] = useState(\"none\");\r\n  const [resourceSize,setResourceSize] = useState(70);\r\n  const [resources, setResources] = useState([]);\r\n  const resourcesOrg = useRef([]);\r\n  \r\n\r\n\r\n  \r\n  \r\n\r\n  function addResource() {\r\n    const uid = uuidv4();\r\n    const resource = {\r\n      id: uid,\r\n      type:resourceType,\r\n      position: resourcePosition,\r\n      size:resourceSize\r\n    };\r\n\r\n    const resourcesTemp = resourcesOrg.current;\r\n    resourcesTemp.push(resource);\r\n    resourcesOrg.current = resourcesTemp;\r\n    setResources([...resourcesTemp]);\r\n  }\r\n\r\n  function addCalamity()  {\r\n    const uid = uuidv4();\r\n    const calamity = {\r\n      id:uid,\r\n      type: calamityType,\r\n      position: calamityPosition,\r\n      duration: calamityDuration,\r\n      amplitude: calamityAmplitude,\r\n      size: calamitySize,\r\n      start:Date.now()\r\n    };\r\n\r\n    const calamitiesTemp = calamitiesOrg.current;\r\n    calamitiesTemp.push(calamity);\r\n    calamitiesOrg.current = calamitiesTemp;\r\n    setCalamities([...calamitiesTemp]);\r\n    return uid;\r\n  }\r\n\r\n  function removeResourceById(id){\r\n    const resourcesTemp = resourcesOrg.current;\r\n    const l = resourcesTemp.length;\r\n    for (var i = 0; i < l; i++) {\r\n      if (resourcesTemp[i].id.localeCompare(id) === 0) {\r\n        resourcesTemp.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    resourcesOrg.current = resourcesTemp;\r\n    if (resourcesTemp.length === 0) {\r\n      setResourcePosition(null);\r\n    }\r\n    setResources([...resourcesTemp]);\r\n  }\r\n\r\n  function removeCalamityById(id){\r\n    const calamitiesTemp = calamitiesOrg.current\r\n    const l = calamitiesTemp.length;\r\n    for(var i=0;i<l;i++){\r\n      if(calamitiesTemp[i].id.localeCompare(id)===0){\r\n        calamitiesTemp.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    calamitiesOrg.current = calamitiesTemp;\r\n    if(calamitiesTemp.length===0){\r\n      setCalamityPosition(null);\r\n    }\r\n    setCalamities([...calamitiesTemp]);\r\n    \r\n  }\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    if (resourcesOrg.current.length < 5 && resourcePosition) {\r\n      addResource();\r\n    }\r\n  }, [resourcePosition]);\r\n\r\n  useEffect(() => {\r\n    if (calamitiesOrg.current.length < 5 && calamityPosition) {\r\n      const newUid = addCalamity();\r\n\r\n      const interval = setInterval(() => {\r\n        removeCalamityById(newUid);\r\n      }, [calamityDuration]);\r\n      if (calamitiesOrg.current.length === 0) {\r\n        return () => {\r\n          clearInterval(interval);\r\n        };\r\n      }\r\n    }\r\n  }, [calamityPosition]);\r\n\r\n  useEffect(() => {\r\n    chartDataOrg.current.push(totalPopulation);\r\n    // timerRef.current  +=  1;\r\n    // setChartData(chartDataOrg.current);\r\n    \r\n  }, [totalPopulation]);\r\n\r\n\r\n  \r\n\r\n  return (\r\n    <GlobalStateContext.Provider\r\n      value={{\r\n        initialPopulation,\r\n        status,\r\n        speed,\r\n        restarted,\r\n        totalPopulation,\r\n        calamityType,\r\n        calamityAmplitude,\r\n        calamityDuration,\r\n        calamityPosition,\r\n        calamitySize,\r\n        calamities,\r\n        resourcePosition,\r\n        resources,\r\n        resourceType,\r\n        resourceSize,\r\n        chartData,\r\n        foodSpawnRate,\r\n        isChartModalVisible,\r\n      }}\r\n    >\r\n      <GlobalActionsContext.Provider\r\n        value={{\r\n          setInitialPopulation,\r\n          setStatus,\r\n          setSpeed,\r\n          setRestart,\r\n          setTotalPopulation,\r\n          setCalamityType,\r\n          setCalamityAmplitude,\r\n          setCalamityDuration,\r\n          setCalamityPosition,\r\n          setCalamitySize,\r\n          removeResourceById,\r\n          setResourcePosition,\r\n          setResourceType,\r\n          setResourceSize,\r\n          setFoodSpawnRate,\r\n          setIsChartModalVisible,\r\n        }}\r\n      >\r\n        {children}\r\n      </GlobalActionsContext.Provider>\r\n    </GlobalStateContext.Provider>\r\n  );\r\n};\r\n\r\nconst useGlobalState = () => {\r\n  const context = React.useContext(GlobalStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGlobalState error\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nconst useGlobalActions = () => {\r\n  const context = React.useContext(GlobalActionsContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGlobalActions error\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nexport { useGlobalState, useGlobalActions, GlobalContextProvider };\r\n"]},"metadata":{},"sourceType":"module"}