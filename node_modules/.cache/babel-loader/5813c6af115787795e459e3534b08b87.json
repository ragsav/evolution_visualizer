{"ast":null,"code":"import _classCallCheck from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{Vector}from\"./vector\";import{v4 as uuidv4}from\"uuid\";export var Creature=/*#__PURE__*/function(){function Creature(x,y,r,gender,creatures){_classCallCheck(this,Creature);this.id=uuidv4();this.pos=new Vector(x,y);this.r=r;this.orignalR=r;this.gender=gender;this.vel=new Vector(0,0);this.acc=new Vector(0,0);this.acceleration=0;this.birth=Date.now();this.color=\"#ffffff\";this.isAdult=false;this.lastBirth=Date.now();this.isAbleToMate=false;this.isFoodFound=false;this.foundFoodPosition=null;this.foodId=null;this.lastFoodTime=Date.now();this.canEatFood=false;this.isInfected=false;this.infectionTime=null;creatures.current.push(this);}_createClass(Creature,[{key:\"updateToAdult\",value:function updateToAdult(){if(this.birth+10000<Date.now()){this.isAdult=true;}}},{key:\"updateAbleToMate\",value:function updateAbleToMate(){if(this.lastBirth+10000<Date.now()){this.isAbleToMate=true;}}},{key:\"updateNotAbleToMate\",value:function updateNotAbleToMate(){this.isAbleToMate=false;this.lastBirth=Date.now();}},{key:\"updateFoodFound\",value:function updateFoodFound(pos,fid){this.isFoodFound=true;this.foundFoodPosition=pos;this.foodId=fid;}},{key:\"updateFoodEaten\",value:function updateFoodEaten(){this.r=this.r*1.5;this.isFoodFound=false;this.foundFoodPosition=null;this.foodId=null;}},{key:\"updateFoodNotFound\",value:function updateFoodNotFound(){this.isFoodFound=false;this.foundFoodPosition=null;this.foodId=null;}},{key:\"updateLastFoodTime\",value:function updateLastFoodTime(){this.lastFoodTime=Date.now();}},{key:\"updateCanEatFood\",value:function updateCanEatFood(){if(this.lastFoodTime+10000<Date.now()){this.canEatFood=true;this.r=this.orignalR;}else{this.canEatFood=false;}}},{key:\"canDie\",value:function canDie(){return this.lastFoodTime+20000+Math.random()*5000<Date.now();}},{key:\"infect\",value:function infect(){if(!this.isInfected){this.isInfected=true;this.infectionTime=Date.now();}}},{key:\"disInfect\",value:function disInfect(){if(this.isInfected&&this.infectionTime+10000<Date.now()){this.isInfected=false;this.infectionTime=null;}}},{key:\"updateColor\",value:function updateColor(){if(this.isInfected){this.color=\"#FF0000\";}else if(this.isAdult){this.color=this.gender==\"F\"?\"#FF75BF\":\"#2ED9FF\";}else{this.color=\"#ffffff\";}}},{key:\"drawBall\",value:function drawBall(ctx){ctx.beginPath();ctx.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI);ctx.fillStyle=this.color;ctx.fill();ctx.closePath();}},{key:\"reposition\",value:function reposition(ctx,speed){var multiplier=[1,-1];var plusMinusX=Math.floor(Math.random()*2);var plusMinusY=Math.floor(Math.random()*2);// this.acc = this.acc.unit().mult(this.acceleration);\nif(this.isFoodFound&&this.pos.subtr(this.foundFoodPosition).mag()<2){this.updateFoodNotFound();}if(this.isFoodFound){this.vel=this.foundFoodPosition.subtr(this.pos).unit();}else{if(Math.random()>0.991)this.vel=this.vel.add(new Vector(multiplier[plusMinusX]*speed,multiplier[plusMinusY]*speed));this.vel=this.vel.mult(1-0.01);}var newPosition={x:this.pos.add(this.vel).x,y:this.pos.add(this.vel).y};var isAtBoundary=false;if(newPosition.x+this.r+10>window.innerWidth-300){newPosition.x=window.innerWidth-300-this.r-10;isAtBoundary=true;}if(newPosition.y+this.r+10>window.innerHeight){newPosition.y=window.innerHeight-this.r-10;isAtBoundary=true;}if(newPosition.x<10){newPosition.x=10+this.r;isAtBoundary=true;}if(newPosition.y<10){newPosition.y=10+this.r;isAtBoundary=true;}if(isAtBoundary){this.vel=this.vel.mult(-1);newPosition={x:this.pos.add(this.vel).x,y:this.pos.add(this.vel).y};}this.pos=new Vector(newPosition.x,newPosition.y);// console.log(this.pos);\n}}]);return Creature;}();","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/components/experiments/creature.js"],"names":["Vector","v4","uuidv4","Creature","x","y","r","gender","creatures","id","pos","orignalR","vel","acc","acceleration","birth","Date","now","color","isAdult","lastBirth","isAbleToMate","isFoodFound","foundFoodPosition","foodId","lastFoodTime","canEatFood","isInfected","infectionTime","current","push","fid","Math","random","ctx","beginPath","arc","PI","fillStyle","fill","closePath","speed","multiplier","plusMinusX","floor","plusMinusY","subtr","mag","updateFoodNotFound","unit","add","mult","newPosition","isAtBoundary","window","innerWidth","innerHeight"],"mappings":"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","sourcesContent":["import { Vector } from \"./vector\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nexport class Creature {\r\n  constructor(x, y, r, gender, creatures) {\r\n    this.id = uuidv4();\r\n    this.pos = new Vector(x, y);\r\n    this.r = r;\r\n    this.orignalR = r;\r\n    this.gender = gender;\r\n    this.vel = new Vector(0, 0);\r\n    this.acc = new Vector(0, 0);\r\n    this.acceleration = 0;\r\n    this.birth = Date.now();\r\n    this.color = \"#ffffff\";\r\n    this.isAdult = false;\r\n    this.lastBirth = Date.now();\r\n    this.isAbleToMate = false;\r\n    this.isFoodFound = false;\r\n    this.foundFoodPosition = null;\r\n    this.foodId = null;\r\n    this.lastFoodTime = Date.now();\r\n    this.canEatFood = false;\r\n    this.isInfected = false;\r\n    this.infectionTime = null;\r\n    creatures.current.push(this);\r\n  }\r\n\r\n  updateToAdult() {\r\n    if (this.birth + 10000 < Date.now()) {\r\n      this.isAdult = true;\r\n    }\r\n  }\r\n  updateAbleToMate() {\r\n    if (this.lastBirth + 10000 < Date.now()) {\r\n      this.isAbleToMate = true;\r\n    }\r\n  }\r\n\r\n  updateNotAbleToMate() {\r\n    this.isAbleToMate = false;\r\n    this.lastBirth = Date.now();\r\n  }\r\n\r\n  updateFoodFound(pos, fid) {\r\n    this.isFoodFound = true;\r\n    this.foundFoodPosition = pos;\r\n    this.foodId = fid;\r\n  }\r\n  updateFoodEaten() {\r\n    this.r = this.r * 1.5;\r\n    this.isFoodFound = false;\r\n    this.foundFoodPosition = null;\r\n    this.foodId = null;\r\n  }\r\n\r\n  updateFoodNotFound() {\r\n    this.isFoodFound = false;\r\n    this.foundFoodPosition = null;\r\n    this.foodId = null;\r\n  }\r\n\r\n  updateLastFoodTime() {\r\n    this.lastFoodTime = Date.now();\r\n  }\r\n\r\n  updateCanEatFood() {\r\n    if (this.lastFoodTime + 10000 < Date.now()) {\r\n      this.canEatFood = true;\r\n      this.r = this.orignalR;\r\n    } else {\r\n      this.canEatFood = false;\r\n    }\r\n  }\r\n\r\n  canDie() {\r\n    return this.lastFoodTime + 20000 + Math.random() * 5000 < Date.now();\r\n  }\r\n\r\n  infect() {\r\n    if (!this.isInfected) {\r\n      this.isInfected = true;\r\n      this.infectionTime = Date.now();\r\n    }\r\n  }\r\n\r\n  disInfect() {\r\n    if (this.isInfected && this.infectionTime + 10000 < Date.now()) {\r\n      this.isInfected = false;\r\n      this.infectionTime = null;\r\n    }\r\n  }\r\n\r\n  updateColor() {\r\n    if (this.isInfected) {\r\n      this.color = \"#FF0000\";\r\n    } else if (this.isAdult) {\r\n      this.color = this.gender == \"F\" ? \"#FF75BF\" : \"#2ED9FF\";\r\n    } else {\r\n      this.color = \"#ffffff\";\r\n    }\r\n  }\r\n  drawBall(ctx) {\r\n    ctx.beginPath();\r\n    ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    ctx.closePath();\r\n  }\r\n\r\n  reposition(ctx, speed) {\r\n    const multiplier = [1, -1];\r\n    const plusMinusX = Math.floor(Math.random() * 2);\r\n    const plusMinusY = Math.floor(Math.random() * 2);\r\n\r\n    // this.acc = this.acc.unit().mult(this.acceleration);\r\n\r\n    if (this.isFoodFound && this.pos.subtr(this.foundFoodPosition).mag() < 2) {\r\n      this.updateFoodNotFound();\r\n    }\r\n\r\n    if (this.isFoodFound) {\r\n      this.vel = this.foundFoodPosition.subtr(this.pos).unit();\r\n    } else {\r\n      if (Math.random() > 0.991)\r\n        this.vel = this.vel.add(\r\n          new Vector(\r\n            multiplier[plusMinusX] * speed,\r\n            multiplier[plusMinusY] * speed\r\n          )\r\n        );\r\n      this.vel = this.vel.mult(1 - 0.01);\r\n    }\r\n\r\n    let newPosition = {\r\n      x: this.pos.add(this.vel).x,\r\n      y: this.pos.add(this.vel).y,\r\n    };\r\n\r\n    let isAtBoundary = false;\r\n    if (newPosition.x + this.r + 10 > window.innerWidth - 300) {\r\n      newPosition.x = window.innerWidth - 300 - this.r - 10;\r\n      isAtBoundary = true;\r\n    }\r\n    if (newPosition.y + this.r + 10 > window.innerHeight) {\r\n      newPosition.y = window.innerHeight - this.r - 10;\r\n      isAtBoundary = true;\r\n    }\r\n    if (newPosition.x < 10) {\r\n      newPosition.x = 10 + this.r;\r\n      isAtBoundary = true;\r\n    }\r\n    if (newPosition.y < 10) {\r\n      newPosition.y = 10 + this.r;\r\n      isAtBoundary = true;\r\n    }\r\n\r\n    if (isAtBoundary) {\r\n      this.vel = this.vel.mult(-1);\r\n      newPosition = {\r\n        x: this.pos.add(this.vel).x,\r\n        y: this.pos.add(this.vel).y,\r\n      };\r\n    }\r\n\r\n    this.pos = new Vector(newPosition.x, newPosition.y);\r\n\r\n    // console.log(this.pos);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}