{"ast":null,"code":"var _jsxFileName = \"E:\\\\projects\\\\Fun\\\\genetic algorithm\\\\src\\\\components\\\\experiments\\\\earth.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { Vector } from \"./vector\";\nimport { Creature } from \"./creature\";\nimport { Wall } from \"./wall\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BALLS = [];\nconst WALLS = [];\n\nfunction randInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction clearCanvas(ctx, canvasRef) {\n  var _canvasRef$current, _canvasRef$current2;\n\n  ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, canvasRef === null || canvasRef === void 0 ? void 0 : (_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.clientWidth, canvasRef === null || canvasRef === void 0 ? void 0 : (_canvasRef$current2 = canvasRef.current) === null || _canvasRef$current2 === void 0 ? void 0 : _canvasRef$current2.clientHeight);\n}\n\nfunction initialPopulation(creatrues) {\n  creatrues = [];\n\n  for (let i = 0; i < 200; i++) {\n    let newBall = new Creature(randInt(0, window.innerWidth - 20), randInt(0, window.innerHeight - 20), 2, Math.round() > 0.5 ? \"F\" : \"M\", creatrues);\n  }\n}\n\nconst Earth = () => {\n  _s();\n\n  const canvasRef = useRef(null);\n  const [ctx, setCtx] = useState(null);\n  const CREATURES = useRef([]);\n  useEffect(() => {\n    if (canvasRef && canvasRef.current) {\n      const canvas = document.getElementById(\"canvas\");\n      const ctx = canvas.getContext(\"2d\");\n      canvasRef.current.focus();\n      setCtx(ctx);\n    }\n  }, [canvasRef]);\n  useEffect(() => {\n    if (ctx) {\n      clearCanvas(ctx, canvasRef);\n      initialPopulation(CREATURES.current);\n      const reqID = requestAnimationFrame(mainLoop);\n      return () => {\n        cancelAnimationFrame(reqID);\n      };\n    }\n  }, [ctx]);\n\n  function mainLoop(timestamp) {\n    clearCanvas(ctx, canvasRef);\n    CREATURES.current.forEach((b, index) => {\n      b.reposition(ctx);\n      b.drawBall(ctx);\n    });\n    requestAnimationFrame(mainLoop);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    tabIndex: 1,\n    id: \"canvas\",\n    ref: canvasRef,\n    width: window.innerWidth,\n    height: window.innerHeight,\n    style: {\n      backgroundColor: \"#222222\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Earth, \"u6ut0VH51Wr81Nrxuq1qArMHH1M=\");\n\n_c = Earth;\nexport default Earth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Earth\");","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/components/experiments/earth.js"],"names":["useEffect","useRef","useState","Vector","Creature","Wall","BALLS","WALLS","randInt","min","max","Math","floor","random","clearCanvas","ctx","canvasRef","clearRect","current","clientWidth","clientHeight","initialPopulation","creatrues","i","newBall","window","innerWidth","innerHeight","round","Earth","setCtx","CREATURES","canvas","document","getElementById","getContext","focus","reqID","requestAnimationFrame","mainLoop","cancelAnimationFrame","timestamp","forEach","b","index","reposition","drawBall","backgroundColor"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { Vector } from \"./vector\";\r\nimport { Creature } from \"./creature\";\r\nimport { Wall } from \"./wall\";\r\nconst BALLS = [];\r\nconst WALLS = [];\r\n\r\nfunction randInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\nfunction clearCanvas(ctx, canvasRef) {\r\n  ctx?.clearRect(\r\n    0,\r\n    0,\r\n    canvasRef?.current?.clientWidth,\r\n    canvasRef?.current?.clientHeight\r\n  );\r\n}\r\nfunction initialPopulation(creatrues) {\r\n  creatrues = [];\r\n  for (let i = 0; i < 200; i++) {\r\n    let newBall = new Creature(\r\n      randInt(0, window.innerWidth - 20),\r\n      randInt(0, window.innerHeight - 20),\r\n      2,\r\n      Math.round() > 0.5 ? \"F\" : \"M\",\r\n      creatrues\r\n    );\r\n  }\r\n}\r\n\r\nconst Earth = () => {\r\n  const canvasRef = useRef(null);\r\n  const [ctx, setCtx] = useState(null);\r\n  const CREATURES = useRef([]);\r\n\r\n  useEffect(() => {\r\n    if (canvasRef && canvasRef.current) {\r\n      const canvas = document.getElementById(\"canvas\");\r\n      const ctx = canvas.getContext(\"2d\");\r\n      canvasRef.current.focus();\r\n      setCtx(ctx);\r\n    }\r\n  }, [canvasRef]);\r\n\r\n  useEffect(() => {\r\n    if (ctx) {\r\n    clearCanvas(ctx, canvasRef);\r\n    initialPopulation(CREATURES.current);\r\n    const reqID = requestAnimationFrame(mainLoop);\r\n    return () => {\r\n      cancelAnimationFrame(reqID);\r\n    };\r\n    }\r\n  }, [ctx]);\r\n\r\n  function mainLoop(timestamp) {\r\n   clearCanvas(ctx, canvasRef);\r\n   CREATURES.current.forEach((b, index) => {\r\n     b.reposition(ctx);\r\n     b.drawBall(ctx);\r\n   });\r\n   requestAnimationFrame(mainLoop);\r\n  }\r\n\r\n  return (\r\n    <canvas\r\n      tabIndex={1}\r\n      id=\"canvas\"\r\n      ref={canvasRef}\r\n      width={window.innerWidth}\r\n      height={window.innerHeight}\r\n      style={{ backgroundColor: \"#222222\" }}\r\n    ></canvas>\r\n  );\r\n};\r\n\r\nexport default Earth;\r\n"]},"metadata":{},"sourceType":"module"}