{"ast":null,"code":"import _toConsumableArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createRef,useEffect,useState,useRef}from\"react\";import{v4 as uuidv4}from\"uuid\";import{jsx as _jsx}from\"react/jsx-runtime\";var GlobalStateContext=/*#__PURE__*/React.createContext(undefined);var GlobalActionsContext=/*#__PURE__*/React.createContext(undefined);var GlobalContextProvider=function GlobalContextProvider(_ref){var children=_ref.children;var _useState=useState(\"Paused\"),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),restarted=_useState4[0],setRestart=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),speed=_useState6[0],setSpeed=_useState6[1];// const [calamity, setCalamity] = useState(\"radiation\");\nvar _useState7=useState(\"radiation\"),_useState8=_slicedToArray(_useState7,2),calamityType=_useState8[0],setCalamityType=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),calamityPosition=_useState10[0],setCalamityPosition=_useState10[1];var _useState11=useState(10000),_useState12=_slicedToArray(_useState11,2),calamityDuration=_useState12[0],setCalamityDuration=_useState12[1];var _useState13=useState(100),_useState14=_slicedToArray(_useState13,2),calamitySize=_useState14[0],setCalamitySize=_useState14[1];var _useState15=useState(6),_useState16=_slicedToArray(_useState15,2),calamityAmplitude=_useState16[0],setCalamityAmplitude=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),calamities=_useState18[0],setCalamities=_useState18[1];var calamitiesOrg=useRef([]);var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),earthQuakePosition=_useState20[0],setEarthQuakePosition=_useState20[1];var _useState21=useState(10000),_useState22=_slicedToArray(_useState21,2),earthQuakeDuration=_useState22[0],setEarthQuakeDuration=_useState22[1];var _useState23=useState(4),_useState24=_slicedToArray(_useState23,2),earthQuakeAmplitude=_useState24[0],setEarthQuakeAmplitude=_useState24[1];var _useState25=useState(100),_useState26=_slicedToArray(_useState25,2),earthQuakeRadius=_useState26[0],setEarthQuakeRadius=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),volcanoPosition=_useState28[0],setVolcanoPosition=_useState28[1];var _useState29=useState(10000),_useState30=_slicedToArray(_useState29,2),volcanoDuration=_useState30[0],setVolcanoDuration=_useState30[1];var _useState31=useState(100),_useState32=_slicedToArray(_useState31,2),volcanoSize=_useState32[0],setVolcanoSize=_useState32[1];var _useState33=useState(null),_useState34=_slicedToArray(_useState33,2),radiationPosition=_useState34[0],setRadiationPosition=_useState34[1];var _useState35=useState(10000),_useState36=_slicedToArray(_useState35,2),radiationDuration=_useState36[0],setRadiationDuration=_useState36[1];var _useState37=useState(4),_useState38=_slicedToArray(_useState37,2),radiationAmplitude=_useState38[0],setRadiationAmplitude=_useState38[1];var _useState39=useState(100),_useState40=_slicedToArray(_useState39,2),radiationRadius=_useState40[0],setRadiationRadius=_useState40[1];// useEffect(() => {\n//   console.log(volcanoPosition);\n// }, [volcanoPosition]);\nfunction addCalamity(){var uid=uuidv4();var calamity={id:uid,type:calamityType,position:calamityPosition,duration:calamityDuration,amplitude:calamityAmplitude,size:calamitySize,start:Date.now()};var calamitiesTemp=calamitiesOrg.current;calamitiesTemp.push(calamity);calamitiesOrg.current=calamitiesTemp;setCalamities(_toConsumableArray(calamitiesTemp));return uid;}function removeCalamityById(id){var calamitiesTemp=calamitiesOrg.current;var l=calamitiesTemp.length;for(var i=0;i<l;i++){if(calamitiesTemp[i].id.localeCompare(id)===0){calamitiesTemp.splice(i,1);break;}}calamitiesOrg.current=calamitiesTemp;if(calamitiesTemp.length===0){setCalamityPosition(null);}setCalamities(_toConsumableArray(calamitiesTemp));}useEffect(function(){if(calamitiesOrg.current.length<5&&calamityPosition){var newUid=addCalamity();var interval=setInterval(function(){removeCalamityById(newUid);},[calamityDuration]);if(calamitiesOrg.current.length===0){return function(){clearInterval(interval);};}}},[calamityPosition]);return/*#__PURE__*/_jsx(GlobalStateContext.Provider,{value:{status:status,speed:speed,restarted:restarted,calamityType:calamityType,calamityAmplitude:calamityAmplitude,calamityDuration:calamityDuration,calamityPosition:calamityPosition,calamitySize:calamitySize,calamities:calamities},children:/*#__PURE__*/_jsx(GlobalActionsContext.Provider,{value:{setStatus:setStatus,setSpeed:setSpeed,setRestart:setRestart,setCalamityType:setCalamityType,setCalamityAmplitude:setCalamityAmplitude,setCalamityDuration:setCalamityDuration,setCalamityPosition:setCalamityPosition,setCalamitySize:setCalamitySize},children:children})});};var useGlobalState=function useGlobalState(){var context=React.useContext(GlobalStateContext);if(context===undefined){throw new Error(\"useGlobalState error\");}return context;};var useGlobalActions=function useGlobalActions(){var context=React.useContext(GlobalActionsContext);if(context===undefined){throw new Error(\"useGlobalActions error\");}return context;};export{useGlobalState,useGlobalActions,GlobalContextProvider};","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/context/globalContext.js"],"names":["React","createRef","useEffect","useState","useRef","v4","uuidv4","GlobalStateContext","createContext","undefined","GlobalActionsContext","GlobalContextProvider","children","status","setStatus","restarted","setRestart","speed","setSpeed","calamityType","setCalamityType","calamityPosition","setCalamityPosition","calamityDuration","setCalamityDuration","calamitySize","setCalamitySize","calamityAmplitude","setCalamityAmplitude","calamities","setCalamities","calamitiesOrg","earthQuakePosition","setEarthQuakePosition","earthQuakeDuration","setEarthQuakeDuration","earthQuakeAmplitude","setEarthQuakeAmplitude","earthQuakeRadius","setEarthQuakeRadius","volcanoPosition","setVolcanoPosition","volcanoDuration","setVolcanoDuration","volcanoSize","setVolcanoSize","radiationPosition","setRadiationPosition","radiationDuration","setRadiationDuration","radiationAmplitude","setRadiationAmplitude","radiationRadius","setRadiationRadius","addCalamity","uid","calamity","id","type","position","duration","amplitude","size","start","Date","now","calamitiesTemp","current","push","removeCalamityById","l","length","i","localeCompare","splice","newUid","interval","setInterval","clearInterval","useGlobalState","context","useContext","Error","useGlobalActions"],"mappings":"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","sourcesContent":["import React, { createRef, useEffect, useState, useRef } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst GlobalStateContext = React.createContext(undefined);\r\nconst GlobalActionsContext = React.createContext(undefined);\r\n\r\nconst GlobalContextProvider = ({ children }) => {\r\n  const [status, setStatus] = useState(\"Paused\");\r\n  const [restarted, setRestart] = useState(true);\r\n  const [speed, setSpeed] = useState(1);\r\n  // const [calamity, setCalamity] = useState(\"radiation\");\r\n\r\n  const [calamityType, setCalamityType] = useState(\"radiation\");\r\n  const [calamityPosition, setCalamityPosition] = useState(null);\r\n  const [calamityDuration, setCalamityDuration] = useState(10000);\r\n  const [calamitySize, setCalamitySize] = useState(100);\r\n  const [calamityAmplitude, setCalamityAmplitude] = useState(6);\r\n  const [calamities, setCalamities] = useState([]);\r\n\r\n  const calamitiesOrg = useRef([]);\r\n  \r\n\r\n\r\n  const [earthQuakePosition, setEarthQuakePosition] = useState(null);\r\n  const [earthQuakeDuration, setEarthQuakeDuration] = useState(10000);\r\n  const [earthQuakeAmplitude, setEarthQuakeAmplitude] = useState(4);\r\n  const [earthQuakeRadius, setEarthQuakeRadius] = useState(100);\r\n\r\n  const [volcanoPosition, setVolcanoPosition] = useState(null);\r\n  const [volcanoDuration, setVolcanoDuration] = useState(10000);\r\n  const [volcanoSize, setVolcanoSize] = useState(100);\r\n\r\n  const [radiationPosition, setRadiationPosition] = useState(null);\r\n  const [radiationDuration, setRadiationDuration] = useState(10000);\r\n  const [radiationAmplitude, setRadiationAmplitude] = useState(4);\r\n  const [radiationRadius, setRadiationRadius] = useState(100);\r\n  // useEffect(() => {\r\n  //   console.log(volcanoPosition);\r\n  // }, [volcanoPosition]);\r\n\r\n\r\n  function addCalamity()  {\r\n    const uid = uuidv4();\r\n    const calamity = {\r\n      id:uid,\r\n      type: calamityType,\r\n      position: calamityPosition,\r\n      duration: calamityDuration,\r\n      amplitude: calamityAmplitude,\r\n      size: calamitySize,\r\n      start:Date.now()\r\n    };\r\n\r\n    const calamitiesTemp = calamitiesOrg.current;\r\n    calamitiesTemp.push(calamity);\r\n    calamitiesOrg.current = calamitiesTemp;\r\n    setCalamities([...calamitiesTemp]);\r\n    return uid;\r\n  }\r\n\r\n  function removeCalamityById(id){\r\n    const calamitiesTemp = calamitiesOrg.current\r\n    const l = calamitiesTemp.length;\r\n    for(var i=0;i<l;i++){\r\n      if(calamitiesTemp[i].id.localeCompare(id)===0){\r\n        calamitiesTemp.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    calamitiesOrg.current = calamitiesTemp;\r\n    if(calamitiesTemp.length===0){\r\n      setCalamityPosition(null);\r\n    }\r\n    setCalamities([...calamitiesTemp]);\r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    \r\n    if (calamitiesOrg.current.length < 5 && calamityPosition) {\r\n      const newUid = addCalamity();\r\n     \r\n      const interval = setInterval(() => {\r\n        removeCalamityById(newUid);\r\n      }, [calamityDuration]);\r\n      if (calamitiesOrg.current.length === 0) {\r\n        return () => {\r\n          clearInterval(interval);\r\n        };\r\n      }\r\n\r\n      \r\n      \r\n    }\r\n  }, [calamityPosition]);\r\n  return (\r\n    <GlobalStateContext.Provider\r\n      value={{\r\n        status,\r\n        speed,\r\n        restarted,\r\n        \r\n\r\n        calamityType,\r\n        calamityAmplitude,\r\n        calamityDuration,\r\n        calamityPosition,\r\n        calamitySize,\r\n        calamities,\r\n      }}\r\n    >\r\n      <GlobalActionsContext.Provider\r\n        value={{\r\n          setStatus,\r\n          setSpeed,\r\n          setRestart,\r\n          \r\n\r\n          setCalamityType,\r\n          setCalamityAmplitude,\r\n          setCalamityDuration,\r\n          setCalamityPosition,\r\n          setCalamitySize,\r\n          \r\n        }}\r\n      >\r\n        {children}\r\n      </GlobalActionsContext.Provider>\r\n    </GlobalStateContext.Provider>\r\n  );\r\n};\r\n\r\nconst useGlobalState = () => {\r\n  const context = React.useContext(GlobalStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGlobalState error\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nconst useGlobalActions = () => {\r\n  const context = React.useContext(GlobalActionsContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGlobalActions error\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nexport { useGlobalState, useGlobalActions, GlobalContextProvider };\r\n"]},"metadata":{},"sourceType":"module"}