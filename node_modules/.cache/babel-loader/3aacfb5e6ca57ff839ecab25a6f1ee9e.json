{"ast":null,"code":"import _toConsumableArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createRef,useEffect,useRef,useState}from\"react\";import{Button,Card}from\"react-bootstrap\";import IconButton from\"@material-ui/core/IconButton\";import DehazeIcon from\"@material-ui/icons/Dehaze\";import{useGlobalActions,useGlobalState}from\"../context/globalContext\";import Node from\"./node\";import{v4 as uuidv4}from\"uuid\";import Statisitcs from\"./statistics\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function usePrevious(value){var ref=useRef();useEffect(function(){ref.current=value;});return ref.current;}var demo=Array.from(Array(20).keys());var Screen=function Screen(){// const {ground} = useGlobalState();\nvar _useGlobalActions=useGlobalActions(),setStatus=_useGlobalActions.setStatus;var _useGlobalState=useGlobalState(),status=_useGlobalState.status;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),trueRef=_useState2[0],setTrueRef=_useState2[1];var screenRef=useRef(null);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isStatsVisible=_useState4[0],setIsStatsVisible=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),creatures=_useState6[0],setCreatures=_useState6[1];var prevCreatures=usePrevious(creatures);function InitializeCreatures(){creatures.splice(0,creatures.length);demo.forEach(function(t,i){var k=uuidv4();creatures.push(/*#__PURE__*/_jsx(Node,{screenRef:screenRef,uid:k,setCreatures:setCreatures,creatures:creatures,bounds:{l:screenRef.current.offsetLeft,t:screenRef.current.offsetTop,w:screenRef.current.clientWidth,h:screenRef.current.clientHeight},children:/*#__PURE__*/_jsx(\"span\",{id:\"\".concat(k,\"+123\")},\"\".concat(k,\"+123\"))},k));});setCreatures(_toConsumableArray(creatures));}useEffect(function(){console.log(creatures.length);if(status.localeCompare(\"Playing\")===0&&Math.random()>0.7&&creatures.length!==prevCreatures.length){var l=creatures.length;var index=Math.random()*l;var creaturesTemp=_toConsumableArray(creatures);creaturesTemp.splice(index,1);setCreatures(_toConsumableArray(creaturesTemp));}},[creatures]);useEffect(function(){if(status.localeCompare(\"Finished\")===0){InitializeCreatures();}},[status]);useEffect(function(){if(screenRef){if(screenRef.current){setTrueRef(screenRef.current);InitializeCreatures();}}},[screenRef]);return/*#__PURE__*/_jsxs(\"div\",{id:\"screen\",style:{height:\"100%\",width:\"100%\",backgroundColor:\"#1E1E1E\"},ref:screenRef,children:[isStatsVisible===false?/*#__PURE__*/_jsx(IconButton,{style:{position:\"absolute\",top:5,left:5},onClick:function onClick(e){e.preventDefault();setIsStatsVisible(true);},children:/*#__PURE__*/_jsx(DehazeIcon,{style:{color:\"white\"}})}):/*#__PURE__*/_jsx(Statisitcs,{setIsStatsVisible:setIsStatsVisible,style:{position:\"absolute\",top:5,left:5}}),trueRef?creatures:null]});};export default Screen;","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/components/screen.js"],"names":["createRef","useEffect","useRef","useState","Button","Card","IconButton","DehazeIcon","useGlobalActions","useGlobalState","Node","v4","uuidv4","Statisitcs","usePrevious","value","ref","current","demo","Array","from","keys","Screen","setStatus","status","trueRef","setTrueRef","screenRef","isStatsVisible","setIsStatsVisible","creatures","setCreatures","prevCreatures","InitializeCreatures","splice","length","forEach","t","i","k","push","l","offsetLeft","offsetTop","w","clientWidth","h","clientHeight","console","log","localeCompare","Math","random","index","creaturesTemp","height","width","backgroundColor","position","top","left","e","preventDefault","color"],"mappings":"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","sourcesContent":["import { createRef, useEffect, useRef, useState } from \"react\";\r\nimport { Button, Card } from \"react-bootstrap\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DehazeIcon from \"@material-ui/icons/Dehaze\";\r\nimport { useGlobalActions, useGlobalState } from \"../context/globalContext\";\r\nimport Node from \"./node\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport Statisitcs from \"./statistics\";\r\n\r\n\r\nfunction usePrevious(value) {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n  return ref.current;\r\n}\r\n\r\n\r\n\r\nconst demo = Array.from(Array(20).keys());\r\nconst Screen = ()=>{\r\n\r\n    \r\n    // const {ground} = useGlobalState();\r\n    const { setStatus } = useGlobalActions();\r\n    const { status } = useGlobalState();\r\n    const [trueRef,setTrueRef] = useState(null);\r\n    const screenRef = useRef(null);\r\n    \r\n    const [isStatsVisible,setIsStatsVisible] = useState(false);\r\n    const [creatures,setCreatures] = useState([])\r\n  \r\n     const prevCreatures = usePrevious(creatures);\r\n    \r\n\r\n    \r\n\r\n\r\n\r\n    function InitializeCreatures()  {\r\n      creatures.splice(0, creatures.length);\r\n      demo.forEach((t, i) => {\r\n        const k = uuidv4();\r\n        \r\n        creatures.push(\r\n          <Node\r\n            screenRef={screenRef}\r\n            uid={k}\r\n            key={k}\r\n            setCreatures={setCreatures}\r\n            creatures={creatures}\r\n            bounds={{\r\n              l: screenRef.current.offsetLeft,\r\n              t: screenRef.current.offsetTop,\r\n              w: screenRef.current.clientWidth,\r\n              h: screenRef.current.clientHeight,\r\n            }}\r\n          >\r\n            <span key={`${k}+123`} id={`${k}+123`}></span>\r\n          </Node>\r\n        );\r\n      });\r\n      setCreatures([...creatures]);\r\n    }\r\n\r\n    useEffect(() => {\r\n      console.log(creatures.length);\r\n\r\n      if (\r\n        status.localeCompare(\"Playing\") === 0 &&\r\n        Math.random() > 0.7 &&\r\n        creatures.length !== prevCreatures.length\r\n      ) {\r\n        const l = creatures.length;\r\n        const index = Math.random() * l;\r\n        const creaturesTemp = [...creatures];\r\n        creaturesTemp.splice(index, 1);\r\n        setCreatures([...creaturesTemp]);\r\n      }\r\n    }, [creatures]);\r\n\r\n    useEffect(() => {\r\n      if (status.localeCompare(\"Finished\") === 0) {\r\n        InitializeCreatures();\r\n      }\r\n    }, [status]);\r\n\r\n    useEffect(() => {\r\n      if (screenRef) {\r\n        if (screenRef.current) {\r\n          setTrueRef(screenRef.current);\r\n          InitializeCreatures();\r\n        }\r\n      }\r\n    }, [screenRef]);\r\n\r\n    \r\n\r\n    \r\n\r\n    \r\n\r\n\r\n\r\n\r\n    return (\r\n      <div\r\n        id=\"screen\"\r\n        style={{ height: \"100%\", width: \"100%\", backgroundColor: \"#1E1E1E\" }}\r\n        ref={screenRef}\r\n      >\r\n        {isStatsVisible === false ? (\r\n          <IconButton\r\n            style={{ position: \"absolute\", top: 5, left: 5 }}\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setIsStatsVisible(true);\r\n            }}\r\n          >\r\n            <DehazeIcon style={{ color: \"white\" }}></DehazeIcon>\r\n          </IconButton>\r\n        ) : (\r\n          <Statisitcs\r\n            setIsStatsVisible = {setIsStatsVisible}\r\n            style={{position: \"absolute\", top: 5, left: 5 }}\r\n          ></Statisitcs>\r\n        )}\r\n        {trueRef ? creatures : null}\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Screen;"]},"metadata":{},"sourceType":"module"}