{"ast":null,"code":"import _slicedToArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createRef,useEffect,useRef,useState}from\"react\";import{useGlobalActions,useGlobalState}from\"../context/globalContext\";import{jsx as _jsx}from\"react/jsx-runtime\";var Creature=function Creature(props){var _useGlobalState=useGlobalState(),status=_useGlobalState.status,speed=_useGlobalState.speed;//   console.log(earthDimensions);\nvar creatureRef=useRef(null);var size=6;var _useState=useState(props.color?props.color:\"#0000000\"),_useState2=_slicedToArray(_useState,2),color=_useState2[0],setColor=_useState2[1];var _useState3=useState({x:Math.floor(props.dim.w*Math.random()+props.dim.left-size/2),y:Math.floor(props.dim.h*Math.random()+props.dim.top-size/2)}),_useState4=_slicedToArray(_useState3,2),position=_useState4[0],setPosition=_useState4[1];function changePosition(){var pos=[1,-1];var skipX=Math.floor(Math.random()*20);var skipY=Math.floor(Math.random()*20);var plusMinusX=Math.floor(Math.random()*2);var plusMinusY=Math.floor(Math.random()*2);var newPosition={x:position.x+pos[plusMinusX]*skipX,y:position.y+pos[plusMinusY]*skipY};if(newPosition.x+size>props.dim.w+props.dim.left){newPosition.x=props.dim.w+props.dim.left-size;}if(newPosition.y+size>props.dim.h+props.dim.top){newPosition.y=props.dim.h+props.dim.top-size;}if(newPosition.x<props.dim.left){newPosition.x=props.dim.left;}if(newPosition.y<props.dim.top){newPosition.y=props.dim.top;}setPosition(newPosition);}function getNeighbourHood(){var neighbours=[];if(creatureRef===null||creatureRef===void 0?void 0:creatureRef.current){var _creatureRef$current,_creatureRef$current$;var children=(_creatureRef$current=creatureRef.current)===null||_creatureRef$current===void 0?void 0:(_creatureRef$current$=_creatureRef$current.parentNode)===null||_creatureRef$current$===void 0?void 0:_creatureRef$current$.childNodes;if(children){Object.keys(children).forEach(function(key){var _children$key;if(((_children$key=children[key])===null||_children$key===void 0?void 0:_children$key.nodeName)===\"DIV\"&&Math.abs(children[key].offsetLeft-position.x)<10&&Math.abs(children[key].offsetTop-position.y)<10&&children[key].id.localeCompare(props.uid)!==0){neighbours.push(children[key]);}});}}return{neighbours:neighbours};}useEffect(function(){// console.log(props.uid);\nif(status.localeCompare(\"Playing\")===0){var interval=setInterval(function(){changePosition();setColor(\"#000000\");var _getNeighbourHood=getNeighbourHood(),neighbours=_getNeighbourHood.neighbours;if(neighbours.length>0){var _props$earthRef,_props$earthRef$curre;var event=new CustomEvent(\"birth\",{detail:{mother:props.uid,candidates:neighbours}});(_props$earthRef=props.earthRef)===null||_props$earthRef===void 0?void 0:(_props$earthRef$curre=_props$earthRef.current)===null||_props$earthRef$curre===void 0?void 0:_props$earthRef$curre.dispatchEvent(event);}},Math.floor(Math.random()*5000/speed)+10);return function(){clearInterval(interval);};}},[position,status,speed]);return/*#__PURE__*/_jsx(\"div\",{ref:creatureRef,id:props.uid,style:{borderRadius:size/2,height:size,width:size,backgroundColor:props.color,position:\"absolute\",top:position.y,left:position.x,transition:\"all 0.5s ease-in-out\"}});};export default Creature;","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/components/creature.js"],"names":["createRef","useEffect","useRef","useState","useGlobalActions","useGlobalState","Creature","props","status","speed","creatureRef","size","color","setColor","x","Math","floor","dim","w","random","left","y","h","top","position","setPosition","changePosition","pos","skipX","skipY","plusMinusX","plusMinusY","newPosition","getNeighbourHood","neighbours","current","children","parentNode","childNodes","Object","keys","forEach","key","nodeName","abs","offsetLeft","offsetTop","id","localeCompare","uid","push","interval","setInterval","length","event","CustomEvent","detail","mother","candidates","earthRef","dispatchEvent","clearInterval","borderRadius","height","width","backgroundColor","transition"],"mappings":"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","sourcesContent":["import { createRef, useEffect, useRef, useState } from \"react\";\r\nimport { useGlobalActions, useGlobalState } from \"../context/globalContext\";\r\nconst Creature = (props) => {\r\n  const { status, speed } = useGlobalState();\r\n  //   console.log(earthDimensions);\r\n  const creatureRef = useRef(null);\r\n  const size = 6;\r\n  const [color, setColor] = useState(props.color ? props.color : \"#0000000\");\r\n  const [position, setPosition] = useState({\r\n    x: Math.floor(props.dim.w * Math.random() + props.dim.left - size / 2),\r\n    y: Math.floor(props.dim.h * Math.random() + props.dim.top - size / 2),\r\n  });\r\n\r\n  function changePosition() {\r\n    const pos = [1, -1];\r\n    const skipX = Math.floor(Math.random() * 20);\r\n    const skipY = Math.floor(Math.random() * 20);\r\n\r\n    const plusMinusX = Math.floor(Math.random() * 2);\r\n    const plusMinusY = Math.floor(Math.random() * 2);\r\n\r\n    const newPosition = {\r\n      x: position.x + pos[plusMinusX] * skipX,\r\n      y: position.y + pos[plusMinusY] * skipY,\r\n    };\r\n\r\n    if (newPosition.x + size > props.dim.w + props.dim.left) {\r\n      newPosition.x = props.dim.w + props.dim.left - size;\r\n    }\r\n    if (newPosition.y + size > props.dim.h + props.dim.top) {\r\n      newPosition.y = props.dim.h + props.dim.top - size;\r\n    }\r\n    if (newPosition.x < props.dim.left) {\r\n      newPosition.x = props.dim.left;\r\n    }\r\n    if (newPosition.y < props.dim.top) {\r\n      newPosition.y = props.dim.top;\r\n    }\r\n\r\n    setPosition(newPosition);\r\n  }\r\n\r\n  function getNeighbourHood() {\r\n    const neighbours = [];\r\n    if (creatureRef?.current) {\r\n      const children = creatureRef.current?.parentNode?.childNodes;\r\n      if (children) {\r\n        Object.keys(children).forEach((key) => {\r\n          if (\r\n            children[key]?.nodeName === \"DIV\" &&\r\n            Math.abs(children[key].offsetLeft - position.x) < 10 &&\r\n            Math.abs(children[key].offsetTop - position.y) < 10 &&\r\n            children[key].id.localeCompare(props.uid) !== 0\r\n          ) {\r\n            neighbours.push(children[key]);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    return { neighbours };\r\n  }\r\n\r\n  useEffect(() => {\r\n    // console.log(props.uid);\r\n    if (status.localeCompare(\"Playing\") === 0) {\r\n      const interval = setInterval(() => {\r\n        changePosition();\r\n        setColor(\"#000000\");\r\n        const { neighbours } = getNeighbourHood();\r\n        if (neighbours.length > 0) {\r\n          const event = new CustomEvent(\"birth\", {\r\n            detail: { mother: props.uid, candidates: neighbours },\r\n          });\r\n          props.earthRef?.current?.dispatchEvent(event);\r\n        }\r\n      }, Math.floor((Math.random() * 5000) / speed) + 10);\r\n      return () => {\r\n        clearInterval(interval);\r\n      };\r\n    }\r\n  }, [position, status, speed]);\r\n  return (\r\n    <div\r\n      ref={creatureRef}\r\n      id={props.uid}\r\n      style={{\r\n        borderRadius: size / 2,\r\n        height: size,\r\n        width: size,\r\n        backgroundColor: props.color,\r\n        position: \"absolute\",\r\n        top: position.y,\r\n        left: position.x,\r\n        transition: \"all 0.5s ease-in-out\",\r\n      }}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default Creature;\r\n"]},"metadata":{},"sourceType":"module"}