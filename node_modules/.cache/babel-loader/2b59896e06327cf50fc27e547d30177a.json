{"ast":null,"code":"var _jsxFileName = \"E:\\\\projects\\\\Fun\\\\genetic algorithm\\\\src\\\\components\\\\creature.js\",\n    _s = $RefreshSig$();\n\nimport { createRef, useEffect, useRef, useState } from \"react\";\nimport { useGlobalActions, useGlobalState } from \"../context/globalContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Creature = props => {\n  _s();\n\n  const {\n    status,\n    speed,\n    calamities,\n    waterBodies\n  } = useGlobalState(); //   console.log(earthDimensions);\n\n  const creatureRef = useRef(null);\n  const size = useRef(6);\n  const [color, setColor] = useState(props.birth + 10000 > Date.now() ? \"#FF4489\" : \"#E8FF95\");\n  const [className, setClassName] = useState(props.birth + 10000 > Date.now() ? \"babyCreature\" : \"adultCreature\");\n  const [position, setPosition] = useState({\n    x: props.x ? props.x : Math.floor(props.dim.w * Math.random() + props.dim.left - size.current / 2),\n    y: props.y ? props.y : Math.floor(props.dim.h * Math.random() + props.dim.top - size.current / 2)\n  });\n\n  function increaseSize() {\n    size.current = 10;\n  }\n\n  function checkCalamity() {\n    // console.log(calamities.length)\n    if (calamities.length > 0) {\n      for (var i = 0; i < calamities.length; i++) {\n        const xDiff = Math.abs(position.x + size.current / 2 - calamities[i].position.x);\n        const yDiff = Math.abs(position.y + size.current / 2 - calamities[i].position.y);\n\n        if (Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2)) < calamities[i].size) {\n          var _props$earthRef, _props$earthRef$curre;\n\n          const event = new CustomEvent(\"death\", {\n            detail: {\n              uid: props.uid\n            }\n          });\n          (_props$earthRef = props.earthRef) === null || _props$earthRef === void 0 ? void 0 : (_props$earthRef$curre = _props$earthRef.current) === null || _props$earthRef$curre === void 0 ? void 0 : _props$earthRef$curre.dispatchEvent(event);\n        }\n      }\n    }\n\n    if (waterBodies.length > 0) {\n      for (var i = 0; i < waterBodies.length; i++) {\n        const xDiff = Math.abs(position.x + size.current / 2 - waterBodies[i].position.x);\n        const yDiff = Math.abs(position.y + size.current / 2 - waterBodies[i].position.y);\n\n        if (Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2)) < waterBodies[i].size) {\n          increaseSize();\n        }\n      }\n    }\n  }\n\n  function changePosition() {\n    checkCalamity();\n    const pos = [1, -1];\n    const skipX = Math.floor(Math.random() * speed);\n    const skipY = Math.floor(Math.random() * speed);\n    const plusMinusX = Math.floor(Math.random() * 2);\n    const plusMinusY = Math.floor(Math.random() * 2);\n    const newPosition = {\n      x: position.x + pos[plusMinusX] * skipX,\n      y: position.y + pos[plusMinusY] * skipY\n    };\n\n    if (newPosition.x + size.current > props.dim.w + props.dim.left) {\n      newPosition.x = props.dim.w + props.dim.left - size.current;\n    }\n\n    if (newPosition.y + size.current > props.dim.h + props.dim.top) {\n      newPosition.y = props.dim.h + props.dim.top - size.current;\n    }\n\n    if (newPosition.x < props.dim.left) {\n      newPosition.x = props.dim.left;\n    }\n\n    if (newPosition.y < props.dim.top) {\n      newPosition.y = props.dim.top;\n    }\n\n    setPosition(newPosition);\n    setColor(props.birth + 10000 > Date.now() ? \"#FF4489\" : \"#E8FF95\");\n    setClassName(props.birth + 10000 > Date.now() ? \"babyCreature\" : \"adultCreature\");\n  }\n\n  function getNeighbourHood() {\n    const neighbourHood = {};\n    const neighbours = [];\n\n    if (creatureRef === null || creatureRef === void 0 ? void 0 : creatureRef.current) {\n      var _creatureRef$current, _creatureRef$current$;\n\n      const children = (_creatureRef$current = creatureRef.current) === null || _creatureRef$current === void 0 ? void 0 : (_creatureRef$current$ = _creatureRef$current.parentNode) === null || _creatureRef$current$ === void 0 ? void 0 : _creatureRef$current$.childNodes;\n\n      if (children) {\n        Object.keys(children).forEach(key => {\n          var _children$key;\n\n          if (((_children$key = children[key]) === null || _children$key === void 0 ? void 0 : _children$key.className.localeCompare(\"adultCreature\")) === 0 && Math.abs(children[key].offsetLeft - position.x) < 10 && Math.abs(children[key].offsetTop - position.y) < 10 && children[key].id.localeCompare(props.uid) !== 0) {\n            neighbours.push(children[key]);\n          }\n        });\n      }\n    }\n\n    neighbourHood.neighbours = neighbours;\n    return neighbourHood;\n  }\n\n  useEffect(() => {\n    // console.log(props.uid);\n    if (status.localeCompare(\"Playing\") === 0) {\n      const interval = setInterval(() => {\n        changePosition();\n\n        if (className.localeCompare(\"adultCreature\") === 0) {\n          const {\n            neighbours\n          } = getNeighbourHood();\n\n          if (neighbours.length > 0) {\n            var _props$earthRef2, _props$earthRef2$curr;\n\n            const event = new CustomEvent(\"birth\", {\n              detail: {\n                mother: props.uid,\n                candidates: neighbours,\n                position: position\n              }\n            });\n            (_props$earthRef2 = props.earthRef) === null || _props$earthRef2 === void 0 ? void 0 : (_props$earthRef2$curr = _props$earthRef2.current) === null || _props$earthRef2$curr === void 0 ? void 0 : _props$earthRef2$curr.dispatchEvent(event);\n          }\n        }\n      }, Math.floor(Math.random() * 500) + 10);\n      return () => {\n        clearInterval(interval);\n      };\n    }\n  }, [position, status, speed]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: className,\n    ref: creatureRef,\n    id: props.uid,\n    style: {\n      borderRadius: size.current / 2,\n      height: size.current,\n      width: size.current,\n      backgroundColor: color,\n      position: \"absolute\",\n      top: position.y,\n      left: position.x,\n      transition: \"all 0.5s ease-in-out\",\n      WebkitBoxShadow: props.birth + 10000 > Date.now() ? \"0 0 10px #FF4489\" : \"none\",\n      boxShadow: props.birth + 10000 > Date.now() ? \"0 0 10px #FF4489\" : \"none\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Creature, \"DZy6Pc9CImt3Nby3qDhEJ2TXeuo=\", false, function () {\n  return [useGlobalState];\n});\n\n_c = Creature;\nexport default Creature;\n\nvar _c;\n\n$RefreshReg$(_c, \"Creature\");","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/components/creature.js"],"names":["createRef","useEffect","useRef","useState","useGlobalActions","useGlobalState","Creature","props","status","speed","calamities","waterBodies","creatureRef","size","color","setColor","birth","Date","now","className","setClassName","position","setPosition","x","Math","floor","dim","w","random","left","current","y","h","top","increaseSize","checkCalamity","length","i","xDiff","abs","yDiff","sqrt","pow","event","CustomEvent","detail","uid","earthRef","dispatchEvent","changePosition","pos","skipX","skipY","plusMinusX","plusMinusY","newPosition","getNeighbourHood","neighbourHood","neighbours","children","parentNode","childNodes","Object","keys","forEach","key","localeCompare","offsetLeft","offsetTop","id","push","interval","setInterval","mother","candidates","clearInterval","borderRadius","height","width","backgroundColor","transition","WebkitBoxShadow","boxShadow"],"mappings":"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","sourcesContent":["import { createRef, useEffect, useRef, useState } from \"react\";\r\nimport { useGlobalActions, useGlobalState } from \"../context/globalContext\";\r\nconst Creature = (props) => {\r\n  const { status, speed, calamities, waterBodies } = useGlobalState();\r\n  //   console.log(earthDimensions);\r\n\r\n  const creatureRef = useRef(null);\r\n  const size = useRef(6);\r\n  const [color, setColor] = useState(\r\n    props.birth + 10000 > Date.now() ? \"#FF4489\" : \"#E8FF95\"\r\n  );\r\n\r\n  const [className, setClassName] = useState(\r\n    props.birth + 10000 > Date.now() ? \"babyCreature\" : \"adultCreature\"\r\n  );\r\n  const [position, setPosition] = useState({\r\n    x: props.x\r\n      ? props.x\r\n      : Math.floor(\r\n          props.dim.w * Math.random() + props.dim.left - size.current / 2\r\n        ),\r\n    y: props.y\r\n      ? props.y\r\n      : Math.floor(\r\n          props.dim.h * Math.random() + props.dim.top - size.current / 2\r\n        ),\r\n  });\r\n\r\n\r\n  function increaseSize() {\r\n    size.current = 10;\r\n  }\r\n  function checkCalamity(){\r\n    // console.log(calamities.length)\r\n    if(calamities.length>0){\r\n\r\n      for(var i=0;i<calamities.length;i++){\r\n        const xDiff = Math.abs(\r\n          position.x + size.current / 2 - calamities[i].position.x\r\n        );\r\n        const yDiff = Math.abs(\r\n          position.y + size.current / 2 - calamities[i].position.y\r\n        );\r\n        if (\r\n          Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2)) <\r\n          calamities[i].size\r\n        ) {\r\n          const event = new CustomEvent(\"death\", {\r\n            detail: { uid: props.uid },\r\n          });\r\n          props.earthRef?.current?.dispatchEvent(event);\r\n        }\r\n      }\r\n      \r\n    }\r\n    if (waterBodies.length > 0) {\r\n      for (var i = 0; i < waterBodies.length; i++) {\r\n        const xDiff = Math.abs(\r\n          position.x + size.current / 2 - waterBodies[i].position.x\r\n        );\r\n        const yDiff = Math.abs(\r\n          position.y + size.current / 2 - waterBodies[i].position.y\r\n        );\r\n        if (\r\n          Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2)) <\r\n          waterBodies[i].size\r\n        ) {\r\n          increaseSize();\r\n        }\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n  function changePosition() {\r\n    checkCalamity();\r\n\r\n\r\n    const pos = [1, -1];\r\n    const skipX = Math.floor(Math.random() * speed);\r\n    const skipY = Math.floor(Math.random() * speed);\r\n\r\n    const plusMinusX = Math.floor(Math.random() * 2);\r\n    const plusMinusY = Math.floor(Math.random() * 2);\r\n\r\n    const newPosition = {\r\n      x: position.x + pos[plusMinusX] * skipX,\r\n      y: position.y + pos[plusMinusY] * skipY,\r\n    };\r\n\r\n    if (newPosition.x + size.current > props.dim.w + props.dim.left) {\r\n      newPosition.x = props.dim.w + props.dim.left - size.current;\r\n    }\r\n    if (newPosition.y + size.current > props.dim.h + props.dim.top) {\r\n      newPosition.y = props.dim.h + props.dim.top - size.current;\r\n    }\r\n    if (newPosition.x < props.dim.left) {\r\n      newPosition.x = props.dim.left;\r\n    }\r\n    if (newPosition.y < props.dim.top) {\r\n      newPosition.y = props.dim.top;\r\n    }\r\n\r\n    setPosition(newPosition);\r\n    setColor(props.birth + 10000 > Date.now() ? \"#FF4489\" : \"#E8FF95\");\r\n\r\n    setClassName(\r\n      props.birth + 10000 > Date.now() ? \"babyCreature\" : \"adultCreature\"\r\n    );\r\n    \r\n  }\r\n\r\n  function getNeighbourHood() {\r\n    const neighbourHood = {};\r\n    const neighbours = [];\r\n    if (creatureRef?.current) {\r\n      const children = creatureRef.current?.parentNode?.childNodes;\r\n      if (children) {\r\n        Object.keys(children).forEach((key) => {\r\n          if (\r\n            children[key]?.className.localeCompare(\"adultCreature\") === 0 &&\r\n            Math.abs(children[key].offsetLeft - position.x) < 10 &&\r\n            Math.abs(children[key].offsetTop - position.y) < 10 &&\r\n            children[key].id.localeCompare(props.uid) !== 0\r\n          ) {\r\n            neighbours.push(children[key]);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    neighbourHood.neighbours = neighbours;\r\n    return neighbourHood;\r\n  }\r\n\r\n  useEffect(() => {\r\n    // console.log(props.uid);\r\n    if (status.localeCompare(\"Playing\") === 0) {\r\n      const interval = setInterval(() => {\r\n        changePosition();\r\n        if(className.localeCompare(\"adultCreature\")===0){\r\n          const { neighbours } = getNeighbourHood();\r\n          if (neighbours.length > 0) {\r\n            const event = new CustomEvent(\"birth\", {\r\n              detail: {\r\n                mother: props.uid,\r\n                candidates: neighbours,\r\n                position: position,\r\n              },\r\n            });\r\n            props.earthRef?.current?.dispatchEvent(event);\r\n          }\r\n        }\r\n        \r\n      }, Math.floor((Math.random() * 500)) + 10);\r\n      return () => {\r\n        clearInterval(interval);\r\n      };\r\n    }\r\n  }, [position, status, speed]);\r\n  return (\r\n    <div\r\n      className={className}\r\n      ref={creatureRef}\r\n      id={props.uid}\r\n      style={{\r\n        borderRadius: size.current / 2,\r\n        height: size.current,\r\n        width: size.current,\r\n        backgroundColor: color,\r\n        position: \"absolute\",\r\n        top: position.y,\r\n        left: position.x,\r\n        transition: \"all 0.5s ease-in-out\",\r\n        WebkitBoxShadow:\r\n          props.birth + 10000 > Date.now() ? \"0 0 10px #FF4489\" : \"none\",\r\n        boxShadow:\r\n          props.birth + 10000 > Date.now() ? \"0 0 10px #FF4489\" : \"none\",\r\n      }}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default Creature;\r\n"]},"metadata":{},"sourceType":"module"}