{"ast":null,"code":"import _toConsumableArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:/projects/Fun/genetic algorithm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createRef,useEffect,useState,useRef}from\"react\";import{v4 as uuidv4}from\"uuid\";import{jsx as _jsx}from\"react/jsx-runtime\";var GlobalStateContext=/*#__PURE__*/React.createContext(undefined);var GlobalActionsContext=/*#__PURE__*/React.createContext(undefined);var GlobalContextProvider=function GlobalContextProvider(_ref){var children=_ref.children;var chartDataOrg=useRef([]);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),chartData=_useState2[0],setChartData=_useState2[1];var _useState3=useState(50),_useState4=_slicedToArray(_useState3,2),initialPopulation=_useState4[0],setInitialPopulation=_useState4[1];var _useState5=useState(\"Paused\"),_useState6=_slicedToArray(_useState5,2),status=_useState6[0],setStatus=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),restarted=_useState8[0],setRestart=_useState8[1];var _useState9=useState(0.5),_useState10=_slicedToArray(_useState9,2),speed=_useState10[0],setSpeed=_useState10[1];var _useState11=useState(50),_useState12=_slicedToArray(_useState11,2),totalPopulation=_useState12[0],setTotalPopulation=_useState12[1];// const [calamity, setCalamity] = useState(\"radiation\");\nvar _useState13=useState(\"none\"),_useState14=_slicedToArray(_useState13,2),calamityType=_useState14[0],setCalamityType=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),calamityPosition=_useState16[0],setCalamityPosition=_useState16[1];var _useState17=useState(10000),_useState18=_slicedToArray(_useState17,2),calamityDuration=_useState18[0],setCalamityDuration=_useState18[1];var _useState19=useState(100),_useState20=_slicedToArray(_useState19,2),calamitySize=_useState20[0],setCalamitySize=_useState20[1];var _useState21=useState(6),_useState22=_slicedToArray(_useState21,2),calamityAmplitude=_useState22[0],setCalamityAmplitude=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),calamities=_useState24[0],setCalamities=_useState24[1];var calamitiesOrg=useRef([]);var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),resourcePosition=_useState26[0],setResourcePosition=_useState26[1];var _useState27=useState(\"none\"),_useState28=_slicedToArray(_useState27,2),resourceType=_useState28[0],setResourceType=_useState28[1];var _useState29=useState(70),_useState30=_slicedToArray(_useState29,2),resourceSize=_useState30[0],setResourceSize=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),resources=_useState32[0],setResources=_useState32[1];var resourcesOrg=useRef([]);function addResource(){var uid=uuidv4();var resource={id:uid,type:resourceType,position:resourcePosition,size:resourceSize};var resourcesTemp=resourcesOrg.current;resourcesTemp.push(resource);resourcesOrg.current=resourcesTemp;setResources(_toConsumableArray(resourcesTemp));}function addCalamity(){var uid=uuidv4();var calamity={id:uid,type:calamityType,position:calamityPosition,duration:calamityDuration,amplitude:calamityAmplitude,size:calamitySize,start:Date.now()};var calamitiesTemp=calamitiesOrg.current;calamitiesTemp.push(calamity);calamitiesOrg.current=calamitiesTemp;setCalamities(_toConsumableArray(calamitiesTemp));return uid;}function removeResourceById(id){var resourcesTemp=resourcesOrg.current;var l=resourcesTemp.length;for(var i=0;i<l;i++){if(resourcesTemp[i].id.localeCompare(id)===0){resourcesTemp.splice(i,1);break;}}resourcesOrg.current=resourcesTemp;if(resourcesTemp.length===0){setResourcePosition(null);}setResources(_toConsumableArray(resourcesTemp));}function removeCalamityById(id){var calamitiesTemp=calamitiesOrg.current;var l=calamitiesTemp.length;for(var i=0;i<l;i++){if(calamitiesTemp[i].id.localeCompare(id)===0){calamitiesTemp.splice(i,1);break;}}calamitiesOrg.current=calamitiesTemp;if(calamitiesTemp.length===0){setCalamityPosition(null);}setCalamities(_toConsumableArray(calamitiesTemp));}useEffect(function(){if(resourcesOrg.current.length<5&&resourcePosition){addResource();}},[resourcePosition]);useEffect(function(){if(calamitiesOrg.current.length<5&&calamityPosition){var newUid=addCalamity();var interval=setInterval(function(){removeCalamityById(newUid);},[calamityDuration]);if(calamitiesOrg.current.length===0){return function(){clearInterval(interval);};}}},[calamityPosition]);useEffect(function(){chartDataOrg.current.push({time:Date.now(),population:totalPopulation});},[totalPopulation]);useEffect(function(){if(restarted){setChartData(chartDataOrg.current);}},[restarted]);return/*#__PURE__*/_jsx(GlobalStateContext.Provider,{value:{initialPopulation:initialPopulation,status:status,speed:speed,restarted:restarted,totalPopulation:totalPopulation,calamityType:calamityType,calamityAmplitude:calamityAmplitude,calamityDuration:calamityDuration,calamityPosition:calamityPosition,calamitySize:calamitySize,calamities:calamities,resourcePosition:resourcePosition,resources:resources,resourceType:resourceType,resourceSize:resourceSize,chartData:chartData},children:/*#__PURE__*/_jsx(GlobalActionsContext.Provider,{value:{setInitialPopulation:setInitialPopulation,setStatus:setStatus,setSpeed:setSpeed,setRestart:setRestart,setTotalPopulation:setTotalPopulation,setCalamityType:setCalamityType,setCalamityAmplitude:setCalamityAmplitude,setCalamityDuration:setCalamityDuration,setCalamityPosition:setCalamityPosition,setCalamitySize:setCalamitySize,removeResourceById:removeResourceById,setResourcePosition:setResourcePosition,setResourceType:setResourceType,setResourceSize:setResourceSize},children:children})});};var useGlobalState=function useGlobalState(){var context=React.useContext(GlobalStateContext);if(context===undefined){throw new Error(\"useGlobalState error\");}return context;};var useGlobalActions=function useGlobalActions(){var context=React.useContext(GlobalActionsContext);if(context===undefined){throw new Error(\"useGlobalActions error\");}return context;};export{useGlobalState,useGlobalActions,GlobalContextProvider};","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/context/globalContext.js"],"names":["React","createRef","useEffect","useState","useRef","v4","uuidv4","GlobalStateContext","createContext","undefined","GlobalActionsContext","GlobalContextProvider","children","chartDataOrg","chartData","setChartData","initialPopulation","setInitialPopulation","status","setStatus","restarted","setRestart","speed","setSpeed","totalPopulation","setTotalPopulation","calamityType","setCalamityType","calamityPosition","setCalamityPosition","calamityDuration","setCalamityDuration","calamitySize","setCalamitySize","calamityAmplitude","setCalamityAmplitude","calamities","setCalamities","calamitiesOrg","resourcePosition","setResourcePosition","resourceType","setResourceType","resourceSize","setResourceSize","resources","setResources","resourcesOrg","addResource","uid","resource","id","type","position","size","resourcesTemp","current","push","addCalamity","calamity","duration","amplitude","start","Date","now","calamitiesTemp","removeResourceById","l","length","i","localeCompare","splice","removeCalamityById","newUid","interval","setInterval","clearInterval","time","population","useGlobalState","context","useContext","Error","useGlobalActions"],"mappings":"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","sourcesContent":["import React, { createRef, useEffect, useState, useRef } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst GlobalStateContext = React.createContext(undefined);\r\nconst GlobalActionsContext = React.createContext(undefined);\r\n\r\nconst GlobalContextProvider = ({ children }) => {\r\n  const chartDataOrg = useRef([]);\r\n  const [chartData, setChartData] = useState(null);\r\n  const [initialPopulation, setInitialPopulation] = useState(50);\r\n  const [status, setStatus] = useState(\"Paused\");\r\n  const [restarted, setRestart] = useState(true);\r\n  const [speed, setSpeed] = useState(0.5);\r\n  const [totalPopulation, setTotalPopulation] = useState(50);\r\n  // const [calamity, setCalamity] = useState(\"radiation\");\r\n\r\n  const [calamityType, setCalamityType] = useState(\"none\");\r\n  const [calamityPosition, setCalamityPosition] = useState(null);\r\n  const [calamityDuration, setCalamityDuration] = useState(10000);\r\n  const [calamitySize, setCalamitySize] = useState(100);\r\n  const [calamityAmplitude, setCalamityAmplitude] = useState(6);\r\n  const [calamities, setCalamities] = useState([]);\r\n\r\n  const calamitiesOrg = useRef([]);\r\n\r\n\r\n\r\n\r\n  \r\n  const [resourcePosition, setResourcePosition] = useState(null);\r\n  const [resourceType,setResourceType] = useState(\"none\");\r\n  const [resourceSize,setResourceSize] = useState(70);\r\n  const [resources, setResources] = useState([]);\r\n  const resourcesOrg = useRef([]);\r\n  \r\n\r\n\r\n  \r\n  \r\n\r\n  function addResource() {\r\n    const uid = uuidv4();\r\n    const resource = {\r\n      id: uid,\r\n      type:resourceType,\r\n      position: resourcePosition,\r\n      size:resourceSize\r\n    };\r\n\r\n    const resourcesTemp = resourcesOrg.current;\r\n    resourcesTemp.push(resource);\r\n    resourcesOrg.current = resourcesTemp;\r\n    setResources([...resourcesTemp]);\r\n  }\r\n\r\n  function addCalamity()  {\r\n    const uid = uuidv4();\r\n    const calamity = {\r\n      id:uid,\r\n      type: calamityType,\r\n      position: calamityPosition,\r\n      duration: calamityDuration,\r\n      amplitude: calamityAmplitude,\r\n      size: calamitySize,\r\n      start:Date.now()\r\n    };\r\n\r\n    const calamitiesTemp = calamitiesOrg.current;\r\n    calamitiesTemp.push(calamity);\r\n    calamitiesOrg.current = calamitiesTemp;\r\n    setCalamities([...calamitiesTemp]);\r\n    return uid;\r\n  }\r\n\r\n  function removeResourceById(id){\r\n    const resourcesTemp = resourcesOrg.current;\r\n    const l = resourcesTemp.length;\r\n    for (var i = 0; i < l; i++) {\r\n      if (resourcesTemp[i].id.localeCompare(id) === 0) {\r\n        resourcesTemp.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    resourcesOrg.current = resourcesTemp;\r\n    if (resourcesTemp.length === 0) {\r\n      setResourcePosition(null);\r\n    }\r\n    setResources([...resourcesTemp]);\r\n  }\r\n\r\n  function removeCalamityById(id){\r\n    const calamitiesTemp = calamitiesOrg.current\r\n    const l = calamitiesTemp.length;\r\n    for(var i=0;i<l;i++){\r\n      if(calamitiesTemp[i].id.localeCompare(id)===0){\r\n        calamitiesTemp.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    calamitiesOrg.current = calamitiesTemp;\r\n    if(calamitiesTemp.length===0){\r\n      setCalamityPosition(null);\r\n    }\r\n    setCalamities([...calamitiesTemp]);\r\n    \r\n  }\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    if (resourcesOrg.current.length < 5 && resourcePosition) {\r\n      addResource();\r\n    }\r\n  }, [resourcePosition]);\r\n\r\n  useEffect(() => {\r\n    if (calamitiesOrg.current.length < 5 && calamityPosition) {\r\n      const newUid = addCalamity();\r\n\r\n      const interval = setInterval(() => {\r\n        removeCalamityById(newUid);\r\n      }, [calamityDuration]);\r\n      if (calamitiesOrg.current.length === 0) {\r\n        return () => {\r\n          clearInterval(interval);\r\n        };\r\n      }\r\n    }\r\n  }, [calamityPosition]);\r\n\r\n  useEffect(() => {\r\n    chartDataOrg.current.push({\r\n      time: Date.now(),\r\n      population: totalPopulation,\r\n    });\r\n  }, [totalPopulation]);\r\n\r\n  useEffect(() => {\r\n    if (restarted) {\r\n      setChartData(chartDataOrg.current);\r\n    }\r\n  }, [restarted]);\r\n\r\n  return (\r\n    <GlobalStateContext.Provider\r\n      value={{\r\n        initialPopulation,\r\n        status,\r\n        speed,\r\n        restarted,\r\n        totalPopulation,\r\n        calamityType,\r\n        calamityAmplitude,\r\n        calamityDuration,\r\n        calamityPosition,\r\n        calamitySize,\r\n        calamities,\r\n        resourcePosition,\r\n        resources,\r\n        resourceType,\r\n        resourceSize,\r\n        chartData,\r\n      }}\r\n    >\r\n      <GlobalActionsContext.Provider\r\n        value={{\r\n          setInitialPopulation,\r\n          setStatus,\r\n          setSpeed,\r\n          setRestart,\r\n          setTotalPopulation,\r\n          setCalamityType,\r\n          setCalamityAmplitude,\r\n          setCalamityDuration,\r\n          setCalamityPosition,\r\n          setCalamitySize,\r\n          removeResourceById,\r\n          setResourcePosition,\r\n          setResourceType,\r\n          setResourceSize,\r\n        }}\r\n      >\r\n        {children}\r\n      </GlobalActionsContext.Provider>\r\n    </GlobalStateContext.Provider>\r\n  );\r\n};\r\n\r\nconst useGlobalState = () => {\r\n  const context = React.useContext(GlobalStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGlobalState error\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nconst useGlobalActions = () => {\r\n  const context = React.useContext(GlobalActionsContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGlobalActions error\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nexport { useGlobalState, useGlobalActions, GlobalContextProvider };\r\n"]},"metadata":{},"sourceType":"module"}