{"ast":null,"code":"var _jsxFileName = \"E:\\\\projects\\\\Fun\\\\genetic algorithm\\\\src\\\\components\\\\node.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useRef } from \"react\";\nimport ReactDom from \"react-dom\";\nimport React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { useGlobalActions, useGlobalState } from \"../context/globalContext\";\nimport \"./node.css\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Node = props => {\n  _s();\n\n  const bounds = props.bounds;\n  const size = 10;\n  const nodeRef = useRef(null);\n  const [position, setPosition] = useState({\n    x: Math.floor(Math.random() * bounds.w),\n    y: Math.floor(Math.random() * bounds.h)\n  });\n  const [color, setColor] = useState(\"#5EFF00\");\n  useEffect(() => {\n    var timeInterval = setInterval(() => {\n      const l = props.creatures.length;\n      const creatures = [...props.creatures];\n\n      for (var i = 0; i < l; i++) {\n        if (creatures[i].key.localeCompare(props.uid) === 0) {\n          if (Math.random() > 0.98) {\n            console.log(props.uid);\n            creatures.splice(i, 1);\n            return;\n          }\n        }\n      }\n\n      props.creatures.forEach((val, i) => {});\n      const pos = [1, -1];\n      const skipX = Math.floor(Math.random() * 50);\n      const skipY = Math.floor(Math.random() * 50);\n      const plusMinusX = Math.floor(Math.random() * 2);\n      const plusMinusY = Math.floor(Math.random() * 2);\n      const newPosition = {\n        x: position.x + pos[plusMinusX] * skipX,\n        y: position.y + pos[plusMinusY] * skipY\n      };\n\n      if (newPosition.x > bounds.w + bounds.l) {\n        newPosition.x = bounds.w;\n      }\n\n      if (newPosition.y > bounds.h + bounds.t) {\n        newPosition.y = bounds.h;\n      }\n\n      if (newPosition.x < bounds.l) {\n        newPosition.x = bounds.l;\n      }\n\n      if (newPosition.y < bounds.t) {\n        newPosition.y = bounds.t;\n      }\n\n      setPosition({ ...newPosition\n      });\n      setColor(\"#5EFF00\");\n\n      if (true) {\n        var _nodeRef$current$pare;\n\n        const children = (_nodeRef$current$pare = nodeRef.current.parentNode) === null || _nodeRef$current$pare === void 0 ? void 0 : _nodeRef$current$pare.childNodes;\n\n        if (children) {\n          Object.keys(children).forEach(key => {\n            var _children$key;\n\n            if (((_children$key = children[key]) === null || _children$key === void 0 ? void 0 : _children$key.nodeName) === \"DIV\" && Math.abs(children[key].offsetLeft - nodeRef.current.offsetLeft) < 10 && Math.abs(children[key].offsetTop - nodeRef.current.offsetTop) < 10 && children[key].firstChild.id.localeCompare(`${props.uid}+123`) !== 0) {\n              if (Math.random() > 0.7) {\n                setColor(\"#FF0000\");\n                const creatures = props.creatures;\n                const k = uuidv4();\n                creatures.push( /*#__PURE__*/_jsxDEV(Node, {\n                  uid: k,\n                  screenRef: props.screenRef,\n                  setCreatures: props.setCreatures,\n                  creatures: creatures,\n                  bounds: bounds,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    id: `${k}+123`\n                  }, `${k}+123`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 31\n                  }, this)\n                }, k, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 29\n                }, this));\n                props.setCreatures([...creatures]);\n              } //do mating here\n\n            }\n          });\n        }\n      }\n    }, 1000);\n    return () => {\n      clearInterval(timeInterval);\n    };\n  }, [position]);\n  useEffect(() => {\n    if (nodeRef && nodeRef.current) {}\n  }, [nodeRef]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    ref: nodeRef,\n    style: {\n      backgroundColor: color,\n      height: size,\n      width: size,\n      top: position.y,\n      left: position.x,\n      position: \"absolute\",\n      borderRadius: size / 2,\n      border: \"none\",\n      transition: \"all 2s ease-in-out\"\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Node, \"gs2zZ6yh+UChAijHDTaIOwWvqK0=\");\n\n_c = Node;\nexport default Node;\n\nvar _c;\n\n$RefreshReg$(_c, \"Node\");","map":{"version":3,"sources":["E:/projects/Fun/genetic algorithm/src/components/node.js"],"names":["useEffect","useState","useRef","ReactDom","React","Card","useGlobalActions","useGlobalState","v4","uuidv4","Node","props","bounds","size","nodeRef","position","setPosition","x","Math","floor","random","w","y","h","color","setColor","timeInterval","setInterval","l","creatures","length","i","key","localeCompare","uid","console","log","splice","forEach","val","pos","skipX","skipY","plusMinusX","plusMinusY","newPosition","t","children","current","parentNode","childNodes","Object","keys","nodeName","abs","offsetLeft","offsetTop","firstChild","id","k","push","screenRef","setCreatures","clearInterval","backgroundColor","height","width","top","left","borderRadius","border","transition"],"mappings":"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","sourcesContent":["import { useEffect, useState ,useRef} from \"react\";\r\nimport ReactDom from \"react-dom\"\r\nimport React from \"react\"\r\nimport {Card} from \"react-bootstrap\";\r\nimport { useGlobalActions, useGlobalState } from \"../context/globalContext\";\r\nimport \"./node.css\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nconst Node = (props)=>{\r\n\r\n    const bounds = props.bounds;\r\n    const size = 10;\r\n    \r\n    \r\n    const nodeRef = useRef(null);\r\n    const [position, setPosition] = useState({\r\n      x: Math.floor(Math.random() * bounds.w),\r\n      y: Math.floor(Math.random() * bounds.h),\r\n    });\r\n    const [color,setColor] = useState(\"#5EFF00\")\r\n\r\n    \r\n    useEffect(()=>{\r\n        var timeInterval = setInterval(()=>{\r\n            const l = props.creatures.length;\r\n            const creatures = [...props.creatures];\r\n            for(var i=0;i<l;i++){\r\n                if (creatures[i].key.localeCompare(props.uid) === 0) {\r\n                  if (Math.random() > 0.98) {\r\n                      console.log(props.uid)\r\n                    creatures.splice(i, 1);\r\n                    return;\r\n                  }\r\n                }\r\n            }\r\n            props.creatures.forEach((val,i)=>{\r\n                \r\n            })\r\n            const pos = [1,-1]\r\n            const skipX = Math.floor(Math.random()*50);\r\n            const skipY = Math.floor(Math.random() * 50);\r\n\r\n            const plusMinusX = Math.floor(Math.random()*2);\r\n            const plusMinusY = Math.floor(Math.random() * 2);\r\n\r\n            const newPosition = {\r\n              x: position.x + pos[plusMinusX] * skipX,\r\n              y: position.y + pos[plusMinusY] * skipY,\r\n            };\r\n            if(newPosition.x > bounds.w + bounds.l){\r\n                newPosition.x = bounds.w;\r\n            }\r\n            if (newPosition.y > bounds.h + bounds.t) {\r\n              newPosition.y = bounds.h;\r\n            }\r\n            if (newPosition.x < bounds.l) {\r\n              newPosition.x = bounds.l;\r\n            }\r\n            if (newPosition.y< bounds.t) {\r\n              newPosition.y = bounds.t;\r\n            }\r\n\r\n            \r\n            setPosition({...newPosition});\r\n            setColor(\"#5EFF00\");\r\n            if(true){\r\n                const children = nodeRef.current.parentNode?.childNodes;\r\n                if(children){\r\n                    Object.keys(children).forEach((key) => {\r\n                      if (\r\n                        children[key]?.nodeName === \"DIV\" &&\r\n                        Math.abs(\r\n                          children[key].offsetLeft - nodeRef.current.offsetLeft\r\n                        ) < 10 &&\r\n                        Math.abs(\r\n                          children[key].offsetTop - nodeRef.current.offsetTop\r\n                        ) < 10 &&\r\n                        children[key].firstChild.id.localeCompare(\r\n                          `${props.uid}+123`\r\n                        ) !== 0\r\n                      ) {\r\n                        if (Math.random() > 0.7) {\r\n                          setColor(\"#FF0000\");\r\n                          const creatures = props.creatures;\r\n                          const k = uuidv4();\r\n                          creatures.push(\r\n                            <Node\r\n                              uid={k}\r\n                              key={k}\r\n                              screenRef={props.screenRef}\r\n                              setCreatures={props.setCreatures}\r\n                              creatures={creatures}\r\n                              bounds={bounds}\r\n                            >\r\n                              <span key={`${k}+123`} id={`${k}+123`}></span>\r\n                            </Node>\r\n                          );\r\n                          props.setCreatures([...creatures]);\r\n                        }\r\n\r\n                        //do mating here\r\n                      }\r\n                    });\r\n                }\r\n                \r\n            }\r\n\r\n        },1000);\r\n        return ()=>{\r\n            clearInterval(timeInterval);\r\n        }\r\n        \r\n    },[position])\r\n\r\n    useEffect(()=>{\r\n        if(nodeRef&&nodeRef.current){\r\n            \r\n        }\r\n    },[nodeRef])\r\n\r\n    \r\n    return (\r\n      <Card\r\n        ref={nodeRef}\r\n        style={{\r\n          backgroundColor: color,\r\n          height: size,\r\n          width: size,\r\n          top: position.y,\r\n          left: position.x,\r\n          position: \"absolute\",\r\n          borderRadius: size / 2,\r\n          border: \"none\",\r\n          transition: \"all 2s ease-in-out\",\r\n        }}\r\n      >\r\n        {props.children}\r\n      </Card>\r\n    );\r\n}\r\n\r\nexport default Node;"]},"metadata":{},"sourceType":"module"}